snapshots not released after using search queries context menu and closing them. null i just noticed that if i work with a snapshot and use the context menu &quot;search queries&quot; , then after i close the snapshot editor the snapshot is still kept in memory. i'll attach some reference chains keeping the snapshots. created <span class=""><a href="attachment.cgi?id=168108" name="attach_168108" title="reference chain keeping the snapshotimpl instance">attachment 168108</a> <a href="attachment.cgi?id=168108&amp;action=edit" title="reference chain keeping the snapshotimpl instance">[details]</a></span> reference chain keeping the snapshotimpl instance created <span class=""><a href="attachment.cgi?id=168112" name="attach_168112" title="path through querycontextmenu$queryaction">attachment 168112</a> <a href="attachment.cgi?id=168112&amp;action=edit" title="path through querycontextmenu$queryaction">[details]</a></span> path through querycontextmenu$queryaction  i noticed another similar effect - snapshotimpl being held, probably with a different cause. still the context menu is involved, so i paste it to the same bug. we may need to close the querycontexthelp and dispose the styled text and clear the fields. here's the path i fixed with the querycontexthelp change:  class name                                                                                 | shallow heap | retained heap  -------------------------------------------------------------------------------------------------------------------------- org.eclipse.mat.parser.internal.snapshotimpl &#64; 0x1105370                                   |           72 |     5,879,992  '- org.eclipse.mat.internal.snapshot.snapshotquerycontext &#64; 0x1abef80                      |           16 |     5,880,008     '- org.eclipse.mat.ui.internal.browser.querycontexthelp &#64; 0x1adde70                     |          152 |     5,881,344        '- org.eclipse.jface.window.window$fontchangelistener &#64; 0x1ade038                    |           16 |     5,881,360           '- [4] java.lang.object[6] &#64; 0x1b00d30                                            |           40 |     5,884,104              '- org.eclipse.core.runtime.listenerlist &#64; 0xbf7730                            |           24 |     5,884,128                 '- org.eclipse.jface.resource.fontregistry &#64; 0xbae400                       |           32 |     5,885,728                    |- class org.eclipse.jface.resource.jfaceresources &#64; 0xbaacb8            |           64 |           536                    |  '- org.eclipse.osgi.internal.baseadaptor.defaultclassloader &#64; 0xb5f4f8|           96 |        26,616  -------------------------------------------------------------------------------------------------------------------------- i've also put a fix in querybrowserpopup to close the help.  <a href="http://www.eclipse.org/articles/swt-design-2/swt-design-2.html">http://www.eclipse.org/articles/swt-design-2/swt-design-2.html</a> is this now fixed? i did some more tests and couldn't reproduce the problem any longer. andrew, thanks for the very fast fixes! (snapshot impl ) (snapshot impl ) (snapshot impl ) (query context menu ) (query action ) (query context menu ) (query action ) (query context menu ) (query action ) (query context help ) (query context help ) (snapshot impl ) (snapshot query context ) (query context help ) (font change listener ) (listener list ) (font registry ) (j face resources ) (default class loader ) (query browser popup ) 312567 312567 312567 312567
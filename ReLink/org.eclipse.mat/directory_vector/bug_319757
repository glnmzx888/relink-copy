widget is disposed message with filter and sorting dominator tree. null to reproduce: bring up the dominator tree type 'x' into the filter column heading click on the class name column heading to sort  the filter heading then has a top half with text, and a bottom half with &lt;regex&gt;  typing another 'x' gives  org.eclipse.swt.swtexception: widget is disposed at org.eclipse.swt.swt.error(swt.java:  at org.eclipse.swt.swt.error(swt.java:  at org.eclipse.swt.swt.error(swt.java:  at org.eclipse.swt.widgets.widget.error(widget.java:  at org.eclipse.swt.widgets.widget.checkwidget(widget.java:  at org.eclipse.swt.widgets.treeitem.getbounds(treeitem.java:  at org.eclipse.mat.ui.internal.viewer.refinedtreeviewer$treeadapter.getbounds(refinedtreeviewer.java:  at org.eclipse.mat.ui.internal.viewer.refinedresultviewer$18.handleevent(refinedresultviewer.java:  at org.eclipse.swt.widgets.eventtable.sendevent(eventtable.java:  at org.eclipse.swt.widgets.widget.sendevent(widget.java:  at org.eclipse.swt.widgets.widget.sendevent(widget.java:  at org.eclipse.swt.widgets.widget.sendevent(widget.java:  at org.eclipse.swt.widgets.text.verifytext(text.java:  at org.eclipse.swt.widgets.text.sendkeyevent(text.java:  at org.eclipse.swt.widgets.widget.sendkeyevent(widget.java:  at org.eclipse.swt.widgets.widget.wmchar(widget.java:  at org.eclipse.swt.widgets.control.wm_char(control.java:  at org.eclipse.swt.widgets.text.wm_char(text.java:  at org.eclipse.swt.widgets.control.windowproc(control.java:  at org.eclipse.swt.widgets.text.windowproc(text.java:  at org.eclipse.swt.widgets.display.windowproc(display.java:  at org.eclipse.swt.internal.win32.os.dispatchmessagew(native method) at org.eclipse.swt.internal.win32.os.dispatchmessage(os.java:  at org.eclipse.swt.widgets.display.readanddispatch(display.java:  at org.eclipse.ui.internal.workbench.runeventloop(workbench.java:  at org.eclipse.ui.internal.workbench.runui(workbench.java:  at org.eclipse.ui.internal.workbench.access$4(workbench.java:  at org.eclipse.ui.internal.workbench$5.run(workbench.java:  at org.eclipse.core.databinding.observable.realm.runwithdefault(realm.java:  at org.eclipse.ui.internal.workbench.createandrunworkbench(workbench.java:  at org.eclipse.ui.platformui.createandrunworkbench(platformui.java:  at org.eclipse.mat.ui.rcp.application.start(application.java:  at org.eclipse.equinox.internal.app.eclipseapphandle.run(eclipseapphandle.java:  at org.eclipse.core.runtime.internal.adaptor.eclipseapplauncher.runapplication(eclipseapplauncher.java:  at org.eclipse.core.runtime.internal.adaptor.eclipseapplauncher.start(eclipseapplauncher.java:  at org.eclipse.core.runtime.adaptor.eclipsestarter.run(eclipsestarter.java:  at org.eclipse.core.runtime.adaptor.eclipsestarter.run(eclipsestarter.java:  at sun.reflect.nativemethodaccessorimpl.invoke0(native method) at sun.reflect.nativemethodaccessorimpl.invoke(unknown source) at sun.reflect.delegatingmethodaccessorimpl.invoke(unknown source) at java.lang.reflect.method.invoke(unknown source) at org.eclipse.equinox.launcher.main.invokeframework(main.java:  at org.eclipse.equinox.launcher.main.basicrun(main.java:  at org.eclipse.equinox.launcher.main.run(main.java:    clicking on the error log then gives another error pop-up  problems occurred when invoking code from plug-in: &quot;org.eclipse.ui.workbench&quot;.  org.eclipse.swt.swtexception: widget is disposed at org.eclipse.swt.swt.error(swt.java:  at org.eclipse.swt.swt.error(swt.java:  at org.eclipse.swt.swt.error(swt.java:  at org.eclipse.swt.widgets.widget.error(widget.java:  at org.eclipse.swt.widgets.widget.checkwidget(widget.java:  at org.eclipse.swt.widgets.treeitem.setimage(treeitem.java:  at org.eclipse.mat.ui.internal.viewer.refinedresultviewer.applyfilterdata(refinedresultviewer.java:  at org.eclipse.mat.ui.internal.viewer.refinedresultviewer$18.updatecriteria(refinedresultviewer.java:  at org.eclipse.mat.ui.internal.viewer.refinedresultviewer$18.handleevent(refinedresultviewer.java:  at org.eclipse.swt.widgets.eventtable.sendevent(eventtable.java:  at org.eclipse.swt.widgets.widget.sendevent(widget.java:  at org.eclipse.swt.widgets.widget.sendevent(widget.java:  at org.eclipse.swt.widgets.widget.sendevent(widget.java:  at org.eclipse.swt.widgets.control.sendfocusevent(control.java:  at org.eclipse.swt.widgets.widget.wmkillfocus(widget.java:  at org.eclipse.swt.widgets.control.wm_killfocus(control.java:  at org.eclipse.swt.widgets.control.windowproc(control.java:  at org.eclipse.swt.widgets.text.windowproc(text.java:  at org.eclipse.swt.widgets.display.windowproc(display.java:  at org.eclipse.swt.internal.win32.os.setfocus(native method) at org.eclipse.swt.widgets.control.forcefocus(control.java:  at org.eclipse.swt.widgets.control.setfocus(control.java:  at org.eclipse.ui.internal.views.log.logview.setfocus(logview.java:  at org.eclipse.ui.internal.partpane.setfocus(partpane.java:  at org.eclipse.ui.internal.workbenchpage$3.run(workbenchpage.java:  at org.eclipse.core.runtime.saferunner.run(saferunner.java:  at org.eclipse.core.runtime.platform.run(platform.java:  at org.eclipse.ui.internal.workbenchpage.activatepart(workbenchpage.java:  at org.eclipse.ui.internal.workbenchpage.setactivepart(workbenchpage.java:  at org.eclipse.ui.internal.workbenchpage.requestactivation(workbenchpage.java:  at org.eclipse.ui.internal.partpane.requestactivation(partpane.java:  at org.eclipse.ui.internal.partpane.handleevent(partpane.java:  at org.eclipse.swt.widgets.eventtable.sendevent(eventtable.java:  at org.eclipse.swt.widgets.widget.sendevent(widget.java:  at org.eclipse.swt.widgets.widget.sendevent(widget.java:  at org.eclipse.swt.widgets.widget.sendevent(widget.java:  at org.eclipse.swt.widgets.shell.setactivecontrol(shell.java:  at org.eclipse.swt.widgets.shell.wm_mouseactivate(shell.java:  at org.eclipse.swt.widgets.control.windowproc(control.java:  at org.eclipse.swt.widgets.canvas.windowproc(canvas.java:  at org.eclipse.swt.widgets.decorations.windowproc(decorations.java:  at org.eclipse.swt.widgets.shell.windowproc(shell.java:  at org.eclipse.swt.widgets.display.windowproc(display.java:  at org.eclipse.swt.internal.win32.os.defwindowprocw(native method) at org.eclipse.swt.internal.win32.os.defwindowproc(os.java:  at org.eclipse.swt.widgets.scrollable.callwindowproc(scrollable.java:  at org.eclipse.swt.widgets.control.windowproc(control.java:  at org.eclipse.swt.widgets.display.windowproc(display.java:  at org.eclipse.swt.internal.win32.os.defwindowprocw(native method) at org.eclipse.swt.internal.win32.os.defwindowproc(os.java:  at org.eclipse.swt.widgets.scrollable.callwindowproc(scrollable.java:  at org.eclipse.swt.widgets.control.windowproc(control.java:  at org.eclipse.swt.widgets.display.windowproc(display.java:  at org.eclipse.swt.internal.win32.os.defwindowprocw(native method) at org.eclipse.swt.internal.win32.os.defwindowproc(os.java:  at org.eclipse.swt.widgets.scrollable.callwindowproc(scrollable.java:  at org.eclipse.swt.widgets.control.windowproc(control.java:  at org.eclipse.swt.widgets.display.windowproc(display.java:  at org.eclipse.swt.internal.win32.os.defwindowprocw(native method) at org.eclipse.swt.internal.win32.os.defwindowproc(os.java:  at org.eclipse.swt.widgets.scrollable.callwindowproc(scrollable.java:  at org.eclipse.swt.widgets.control.windowproc(control.java:  at org.eclipse.swt.widgets.display.windowproc(display.java:  at org.eclipse.swt.internal.win32.os.defwindowprocw(native method) at org.eclipse.swt.internal.win32.os.defwindowproc(os.java:  at org.eclipse.swt.widgets.scrollable.callwindowproc(scrollable.java:  at org.eclipse.swt.widgets.control.windowproc(control.java:  at org.eclipse.swt.widgets.display.windowproc(display.java:  at org.eclipse.swt.internal.win32.os.defwindowprocw(native method) at org.eclipse.swt.internal.win32.os.defwindowproc(os.java:  at org.eclipse.swt.widgets.scrollable.callwindowproc(scrollable.java:  at org.eclipse.swt.widgets.control.windowproc(control.java:  at org.eclipse.swt.widgets.display.windowproc(display.java:  at org.eclipse.swt.internal.win32.os.defwindowprocw(native method) at org.eclipse.swt.internal.win32.os.defwindowproc(os.java:  at org.eclipse.swt.widgets.scrollable.callwindowproc(scrollable.java:  at org.eclipse.swt.widgets.control.windowproc(control.java:  at org.eclipse.swt.widgets.display.windowproc(display.java:  at org.eclipse.swt.internal.win32.os.defwindowprocw(native method) at org.eclipse.swt.internal.win32.os.defwindowproc(os.java:  at org.eclipse.swt.widgets.tree.callwindowproc(tree.java:  at org.eclipse.swt.widgets.tree.windowproc(tree.java:  at org.eclipse.swt.widgets.display.windowproc(display.java:  at org.eclipse.swt.internal.win32.os.callwindowprocw(native method) at org.eclipse.swt.internal.win32.os.callwindowproc(os.java:  at org.eclipse.swt.widgets.tree.callwindowproc(tree.java:  at org.eclipse.swt.widgets.control.windowproc(control.java:  at org.eclipse.swt.widgets.tree.windowproc(tree.java:  at org.eclipse.swt.widgets.display.windowproc(display.java:  at org.eclipse.swt.internal.win32.os.peekmessagew(native method) at org.eclipse.swt.internal.win32.os.peekmessage(os.java:  at org.eclipse.swt.widgets.display.readanddispatch(display.java:  at org.eclipse.ui.internal.workbench.runeventloop(workbench.java:  at org.eclipse.ui.internal.workbench.runui(workbench.java:  at org.eclipse.ui.internal.workbench.access$4(workbench.java:  at org.eclipse.ui.internal.workbench$5.run(workbench.java:  at org.eclipse.core.databinding.observable.realm.runwithdefault(realm.java:  at org.eclipse.ui.internal.workbench.createandrunworkbench(workbench.java:  at org.eclipse.ui.platformui.createandrunworkbench(platformui.java:  at org.eclipse.mat.ui.rcp.application.start(application.java:  at org.eclipse.equinox.internal.app.eclipseapphandle.run(eclipseapphandle.java:  at org.eclipse.core.runtime.internal.adaptor.eclipseapplauncher.runapplication(eclipseapplauncher.java:  at org.eclipse.core.runtime.internal.adaptor.eclipseapplauncher.start(eclipseapplauncher.java:  at org.eclipse.core.runtime.adaptor.eclipsestarter.run(eclipsestarter.java:  at org.eclipse.core.runtime.adaptor.eclipsestarter.run(eclipsestarter.java:  at sun.reflect.nativemethodaccessorimpl.invoke0(native method) at sun.reflect.nativemethodaccessorimpl.invoke(unknown source) at sun.reflect.delegatingmethodaccessorimpl.invoke(unknown source) at java.lang.reflect.method.invoke(unknown source) at org.eclipse.equinox.launcher.main.invokeframework(main.java:  at org.eclipse.equinox.launcher.main.basicrun(main.java:  at org.eclipse.equinox.launcher.main.run(main.java:   a similar problem occurs with the class histogram when grouped by superclass or classloader, or with an outgoing objects view. one solution would be to have a lot of if (!item.isdisposed()) etc code.  would it be better to listen for the dispose of the table/tree item then dispose the composite used for the filter text? i've added a dispose listener for the table/tree item which disposes the filter editor composite. i remove the listener if the composite is disposed another way. i have seen the following exception while using the filter with a dominator tree, by going to the shallow heap filter, entering '0000' then pressing 'enter' twice.   java.lang.nullpointerexception     at org.eclipse.mat.ui.internal.viewer.refinedresultviewer$3.handleevent(refinedresultviewer.java:      at org.eclipse.swt.widgets.eventtable.sendevent(eventtable.java:      at org.eclipse.swt.widgets.widget.sendevent(widget.java:      at org.eclipse.swt.widgets.display.rundeferredevents(display.java:      at org.eclipse.swt.widgets.display.readanddispatch(display.java:      at org.eclipse.ui.internal.workbench.runeventloop(workbench.java:      at org.eclipse.ui.internal.workbench.runui(workbench.java:      at org.eclipse.ui.internal.workbench.access$4(workbench.java:      at org.eclipse.ui.internal.workbench$7.run(workbench.java:      at org.eclipse.core.databinding.observable.realm.runwithdefault(realm.java:      at org.eclipse.ui.internal.workbench.createandrunworkbench(workbench.java:      at org.eclipse.ui.platformui.createandrunworkbench(platformui.java:      at org.eclipse.mat.ui.rcp.application.start(application.java:      at org.eclipse.equinox.internal.app.eclipseapphandle.run(eclipseapphandle.java:      at org.eclipse.core.runtime.internal.adaptor.eclipseapplauncher.runapplication(eclipseapplauncher.java:      at org.eclipse.core.runtime.internal.adaptor.eclipseapplauncher.start(eclipseapplauncher.java:      at org.eclipse.core.runtime.adaptor.eclipsestarter.run(eclipsestarter.java:      at org.eclipse.core.runtime.adaptor.eclipsestarter.run(eclipsestarter.java:      at sun.reflect.nativemethodaccessorimpl.invoke0(native method)     at sun.reflect.nativemethodaccessorimpl.invoke(nativemethodaccessorimpl.java:      at sun.reflect.delegatingmethodaccessorimpl.invoke(delegatingmethodaccessorimpl.java:      at java.lang.reflect.method.invoke(method.java:      at org.eclipse.equinox.launcher.main.invokeframework(main.java:      at org.eclipse.equinox.launcher.main.basicrun(main.java:      at org.eclipse.equinox.launcher.main.run(main.java:      at org.eclipse.equinox.launcher.main.main(main.java:  null pointer fix done.  should we consider not disposing the filter treeitem when refreshing the view? see <span class="bz_closed"><a href="show_bug.cgi?id=322508" title="resolved fixed - allow easier keyboard navigation of filter and sorting columns">bug 322508</a></span> (swt exception ) (tree item ) (tree item ) (refined tree viewer ) (tree adapter ) (refined tree viewer ) (refined result viewer ) (refined result viewer ) (event table ) (event table ) (dispatch message ) (dispatch message ) (platform ui ) (platform ui ) (eclipse app handle ) (eclipse app handle ) (eclipse app launcher ) (eclipse app launcher ) (eclipse app launcher ) (eclipse app launcher ) (eclipse starter ) (eclipse starter ) (eclipse starter ) (eclipse starter ) (native method accessor impl ) (native method accessor impl ) (delegating method accessor impl ) (swt exception ) (tree item ) (tree item ) (refined result viewer ) (refined result viewer ) (refined result viewer ) (refined result viewer ) (refined result viewer ) (refined result viewer ) (event table ) (event table ) (set focus ) (log view ) (log view ) (part pane ) (part pane ) (workbench page ) (workbench page ) (safe runner ) (safe runner ) (workbench page ) (workbench page ) (workbench page ) (workbench page ) (workbench page ) (workbench page ) (part pane ) (part pane ) (part pane ) (part pane ) (event table ) (event table ) (def window proc ) (def window proc ) (def window proc ) (def window proc ) (def window proc ) (def window proc ) (def window proc ) (def window proc ) (def window proc ) (def window proc ) (def window proc ) (def window proc ) (def window proc ) (def window proc ) (def window proc ) (def window proc ) (call window proc ) (call window proc ) (peek message ) (peek message ) (platform ui ) (platform ui ) (eclipse app handle ) (eclipse app handle ) (eclipse app launcher ) (eclipse app launcher ) (eclipse app launcher ) (eclipse app launcher ) (eclipse starter ) (eclipse starter ) (eclipse starter ) (eclipse starter ) (native method accessor impl ) (native method accessor impl ) (delegating method accessor impl ) (null pointer exception ) (refined result viewer ) (refined result viewer ) (event table ) (event table ) (platform ui ) (platform ui ) (eclipse app handle ) (eclipse app handle ) (eclipse app launcher ) (eclipse app launcher ) (eclipse app launcher ) (eclipse app launcher ) (eclipse starter ) (eclipse starter ) (eclipse starter ) (eclipse starter ) (native method accessor impl ) (native method accessor impl ) (native method accessor impl ) (delegating method accessor impl ) (delegating method accessor impl ) (tree item ) ( win ) ( 32 ) ( win ) ( 32 ) ( invoke ) ( 0 ) ( win ) ( 32 ) ( win ) ( 32 ) ( win ) ( 32 ) ( win ) ( 32 ) ( win ) ( 32 ) ( win ) ( 32 ) ( win ) ( 32 ) ( win ) ( 32 ) ( win ) ( 32 ) ( win ) ( 32 ) ( win ) ( 32 ) ( win ) ( 32 ) ( win ) ( 32 ) ( win ) ( 32 ) ( win ) ( 32 ) ( win ) ( 32 ) ( win ) ( 32 ) ( win ) ( 32 ) ( win ) ( 32 ) ( win ) ( 32 ) ( win ) ( 32 ) ( invoke ) ( 0 ) ( invoke ) ( 0 ) 319757 319757 319757 319757